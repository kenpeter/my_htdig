<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
  <head>
	<title>
	  ht://Dig: rundig
	</title> 
        <link rel="stylesheet" href="htdig.css">
  </head>
  <body bgcolor="#eef7ff">
	<h1>
	  rundig
	</h1>
	<p>
	  ht://Dig Copyright &copy; 1995-2002 <a href="THANKS.html">The ht://Dig Group</a><br>
	  Please see the file <a href="COPYING">COPYING</a> for
	  license information.
	</p>
	<hr size="4" noshade>
	<dl>
	  <dd>
		<h2>
		  Synopsis
		</h2>
	  </dd>
	  <dd>
		rundig [<em>options</em>]
	  </dd>
	</dl>
	<dl>
	  <dd>
		<h2>
		  Description
		</h2>
	  </dd>
	  <dd>
		Rundig is a shell script that builds the databases necessary
		for a typical ht://Dig setup. It runs <a href="htdig.html">
		htdig</a> first to build the initial database, then it runs
		<a href="htmerge.html">htmerge</a> to create a document index
		and word database from the files that were created by htdig.
		It then runs <a href="htnotify.html">htnotify</a>, and finally
		runs <a href="htfuzzy.html">htfuzzy</a> if necessary, to build
		the endings and synonyms databases if they're missing or
		outdated. Rundig uses the "-i" option to htdig, so it always
		reindexes your web site from scratch when you run it.
	  </dd>
	</dl>
	<dl>
	  <dd>
		<h2>
		  Options
		</h2>
	  </dd>
	  <dd>
		<dl compact>
		  <dt>
			-a
		  </dt>
		  <dd>
			Use alternate work files. Tells htdig and htmerge to
			append <em>.work</em> to database files, causing a
			second copy of the database to be built. This allows
			the original files to be used by htsearch during the
			indexing run. After htdig and htmerge are done building
			the .work database files, rundig will move them into
			place, replacing the original files.
			<br>This option only works for building a new second
			copy of the database from scratch, and not for updating
			an existing database. To do that would require further
			customization of the rundig script. It's not sufficient
			to simply remove the "-i" option from htdig in the
			script. See the <em>Customization</em> section below.
		  </dd>
		  <dt>
			-c <em>configfile</em>
		  </dt>
		  <dd>
			Use the specified <i>configfile</i> file instead of the
			default.
		  </dd>
		  <dt>
			-s
		  </dt>
		  <dd>
			Print statistics about the dig after completion.
		  </dd>
		  <dt>
			-v
		  </dt>
		  <dd>
			Verbose mode. This increases the verbosity of the
			programs. Using more than 2 is probably only useful for
			debugging purposes. The default verbose mode (using
			only one -v) gives a nice progress report while
			digging and merging. This progress report can be a bit
			cryptic, but is explained in the <a href="htdig.html">
			htdig</a> documentation.
		  </dd>
		</dl>
	  </dd>
	</dl>
	<dl>
	  <dd>
		<h2>
		  Files
		</h2>
	  </dd>
	  <dd>
		<dl>
		  <dt>
			BIN_DIR/htdig, htmerge, htnotify, htfuzzy
		  </dt>
		  <dd>
			The executable programs called by rundig.
		  </dd>
		  <dt>
			CONFIG_DIR/htdig.conf
		  </dt>
		  <dd>
			The default configuration file.
		  </dd>
		  <dt>
			COMMON_DIR/english.0, english.aff, synonyms
		  </dt>
		  <dd>
			The default fuzzy match dictionary files.
		  </dd>
		</dl>
	  </dd>
	</dl>
	<dl>
	  <dd>
		<h2>
		  See Also
		</h2>
	  </dd>
	  <dd>
		<a href="htdig.html">htdig</a>,
		<a href="htmerge.html">htmerge</a>,
		<a href="htnotify.html">htnotify</a>,
		<a href="htfuzzy.html">htfuzzy</a>,
		<a href="htsearch.html" target="_top">htsearch</a>, and
		<a href="attrs.html">Configuration file format</a>.
	  </dd>
	</dl>
	<dl>
	  <dd>
		<h2>
		  Customization
		</h2>
	  </dd>
	  <dd>
		Because rundig is a shell script, it's easy to customize
		it as needed. It's also necessary to customize it if you
		change the settings of your
		<a href="attrs.html#database_dir">database_dir</a> or
		<a href="attrs.html#common_dir">common_dir</a> attributes
		(you'll need to make the corresponding changes to the DBDIR
		and COMMONDIR variables in the script), if you change the
		<a href="attrs.html#database_base">database_base</a>
		attribute (there's an embedded "db." filename in the
		script), if you decide to
		use other fuzzy algorithms that need their own databases
		rebuilt, or if you change the names of the endings or
		synonyms databases or source files. Before customizing the
		script, be sure to familiarize yourself with the individual
		programs in the package and how they interact.
		<br>
		<br>A common mistake is to assume that you can simply take
		the "-i" option off the htdig command line in rundig to make
		rundig update rather than reindexing from scratch. This will
		work as long as you don't use the "-a" option to rundig.
		The file manipulations that rundig -a does assume that you've
		created a new database from scratch, and all files are moved
		from .work files to the original file locations. However,
		nothing is done before running htdig to move or copy the
		db.wordlist and db.docdb to .work files before running htdig.
		The end result is that a rundig -a will still reindex
		your site from scratch. When it comes to more drastic changes
		such as this, many users chose to write their own custom
		script, rather than modifying rundig. For example, see the
		<a href="http://www.htdig.org/files/contrib/scripts/rundig.sh">
		rundig.sh</a> script in our contributed files.
	  </dd>
	</dl>
	<hr size="4" noshade>

	Last modified: $Date: 2002/01/28 05:14:24 $
  </body>
</html>
